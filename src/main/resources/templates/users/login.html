<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <script>
        function checkLogin() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;

            const userData = JSON.parse(localStorage.getItem(username));

            if (userData && userData.password === password) {
                localStorage.setItem('loggedInUser', username); // 로그인 상태 저장
                alert('로그인 성공!');
                window.location.href = 'index.html'; // 로그인 후 이동할 페이지
            } else {
                alert('아이디 또는 비밀번호가 잘못되었습니다.');
            }
        }
    </script>
</head>
<body>
<!-- Header Section -->
<header class="navbar">
    <div class="logo">
        <a href="/"> <!-- 로고 클릭 시 index.html로 이동 -->
            <img src="../static/images/MODUNURI.png" class="logo img"> <!-- 이미지 추가 -->
            MODUNURI
        </a>
    </div>
    <form class="search-container" action="/search" method="GET">
        <input type="text" placeholder="Search..." class="search-input" name="query">
    </form>

    <nav>
        <ul class="nav-links">
            <li><a href="/users/Search">지역 별 검색</a></li>
            <li><a href="#">Travel Tips</a></li>
            <li><a href="#">Community</a></li>
            <li><a href="#">Support Center</a></li>
            <!-- 로그인 상태 확인 -->
            <li class="nav-item-right">
                <span th:if="${username != null}">
                    <a href="/users/mypage" class="my-page-button">My Page</a> <!-- My Page 버튼 추가 -->
                    <a th:text="${username} + '님 안녕하세요'"></a>
                    <a href="/users/logout" class="auth-button">Logout</a>
                </span>
                <span th:if="${username == null}">
                    <a href="/users/signup" class="auth-button">Sign Up</a>
                    <a href="/users/login" class="auth-button">Log In</a> <!-- Log In 버튼 추가 -->
                </span>
            </li>
        </ul>
    </nav>
</header>

<div class="back-container">
    <div class="content-container">
        <!-- Login Section -->
        <div class="login-container">
            <h1>Login</h1>
            <form onsubmit="checkLogin(); return false;">
                <label for="login-username">Username:</label>
                <input type="text" id="login-username" required>

                <label for="login-password">Password:</label>
                <input type="password" id="login-password" required>

                <button type="submit" class="login-button">Log In</button>
                </form>
            <a href="/users/signup" class="link-to-login">Don't have an account? Sign up</a>
        </div>
    </div>
</div>


<!-- 로그인 실패 시 에러 메시지 표시 -->
<div th:if="${param.error}" class="error">
    Invalid email or password. <!-- 테스토 용으로 쓴거임(변경가능) -->
</div>


<!-- Footer Section -->
<footer class="footer">
    <div class="footer-links">
        <ul>
            <li><p>(주)코뿔소코퍼레이션</p></li>

        </ul>
    </div>
</footer>
<script src="/static/script/script.js"></script>
</body>
</html>
